#!/usr/bin/env python

'''
Copyright (c) 2011 Siraaj Khandkar
Licensed under MIT license. See LICENSE file for details.

File    : commander
Author  : Siraaj Khandkar <siraaj@khandkar.net>
Purpose : Executable wrapper around the commander app.
'''

import os
import sys
import commands


PATH_DIR__THIS = os.path.abspath(os.path.dirname(__file__))
PATH_DIR__ROOT = os.path.split(PATH_DIR__THIS)[0]
PATH_DIR__BEAM = os.path.join(PATH_DIR__ROOT, 'ebin')


def main():
    arguments = sys.argv[1:]

    if not len(arguments) >= 1:
        print "USAGE:"
        print "------"
        print "%s <command-to-run>" % __file__
    else:
        os.chdir(PATH_DIR__BEAM)
        os.system(
            'erl -noshell -pa %s -s commander start %s' %
            (PATH_DIR__BEAM, ' '.join(arguments))
        )


if __name__ == '__main__':
    main()
