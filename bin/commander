#!/usr/bin/env python


import os
import sys


PATH_DIR__THIS = os.path.abspath(os.path.dirname(__file__))
PATH_DIR__ROOT = os.path.split(PATH_DIR__THIS)[0]
PATH_DIR__BEAM = os.path.join(PATH_DIR__ROOT, 'ebin')


def main():
    arguments = sys.argv[1:]

    if len(arguments) < 3:
        print "USAGE:"
        print "------"
        print "%s <hostname> <username> <command>" % __file__
    else:
        os.chdir(PATH_DIR__BEAM)
        os.system(
            'erl -noshell -pa %s -s commander main %s' %
            (PATH_DIR__BEAM, ' '.join(arguments))
        )


if __name__ == '__main__':
    main()
